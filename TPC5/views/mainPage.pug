extends layout

block content
	.w3-card-4
		header.w3-container.w3-red
			h2 TPC 5 - Lista de Tarefas : Final Mix
		.w3-container.w3-cell
			button.w3-btn.w3-purple #[a(href="/users/create") #[b Adicionar Utilizador]]
			form.w3-container.w3-card-4.w3-blue(method="POST" action="/tasks/create")
				fieldset
					legend #[b Adicionar Tarefa]
					p Insira os dados da nova tarefa que pretende criar
					input(type="hidden" name="id" value=tID)
					label Descrição da tarefa
					input.w3-input.w3-border(type="text" name="desc")
					label Qual a data limite?
					input.w3-input.w3-border(type="date" name="due")
					label Quem a irá realizar?
					select.w3-select(name="who")
						option(value="" disabled selected) Escolha uma pessoa...
							each u in utilizadores
								option.w3-center #{u.name}
					input(type="hidden" name="done" value="false")
					
				button.w3-btn.w3-green.w3-mb-2(type="submit") Enviar

		.w3-container.w3-cell.w3-border(style="width:50%")
			h2 Tarefas por fazer:
			each t in tarefas
				if t.done == "false"
					.w3-container.w3-border
						p.w3-right-align [#[a(href="/tasks/edit/"+t.id) #[b Editar]]] [#[a(href="/tasks/delete/"+t.id) #[b Apagar]]] [#[a(href="/tasks/done/"+t.id) #[b Feito]]]
						p #[b Descrição]: #{t.desc}
						p #[b Responsável]: #{t.who}
						p #[b Data Limite]: #{t.due}

		.w3-container.w3-cell.w3-border(style="width:50%")
			h2 Tarefas feitas:
			each t in tarefas
				if t.done == "true"
					.w3-container.w3-border
						p.w3-right-align [#[a(href="/tasks/delete/"+t.id) #[b Apagar]]]
						p Descrição: #{t.desc}
						p Responsável: #{t.who}
						p Data Limite: #{t.due}			
				
		footer.w3-container.w3-yellow
			h5 João Loureiro - a97257 | Engenharia Web 2023 - Universidade do Minho
			h5 Generated by server: #{d}
		